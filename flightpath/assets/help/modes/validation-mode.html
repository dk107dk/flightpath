<html>
    {% include "templates/styles.html" %}
   <body>
        <h2>
            Mode: validation-mode
        </h2>
        <p>
        <i>validation-mode</i> determines how errors are handled. It is crucial to getting the validation results you are looking for.
        </p>
        <p>
            Validation mode overlays the config file's global errors settings on a csvpath-by-csvpath basis. In <i>config.ini</i> the settings are in the <i>[errors]</i> section under the <i>csvpath</i> and <i>csvpaths</i> keys. Because validation mode is an overlay, you should use the negative form when you don't want an action to happen on error. You can create the negative form by prefixing with `no-`, as in `no-raise`.
        </p>
        <p>
            There are a number of options for <i>validation-mode</i>. You may select multiple of them using commas.
        </p>
        <p>
        <table cellspacing="0" cellpadding="2" class='examples' width="900">
                <tr>
                <td width="300"  class="about border-ltr ">
                                print
                        </td>
                <td class='value border-ltr '>
                                <p style="margin:4px">
                                    Adding <i>print</i> to <i>validation-mode</i> makes CsvPath Framework
                                    print errors to the default printer.
                                </p>
                        </td>
                </tr>
                <tr>
                <td width="300"  class="about border-ltr ">
                                raise
                        </td>
                <td class='value border-ltr '>
                                <p style="margin:4px">
                                When set, the first error stops the run with a raised exception. This is, of course, very disruptive.
                                </p>
                        </td>
                </tr>
                <tr>
                <td width="300"  class="about border-ltr">
                                stop
                        </td>
                <td class='value border-ltr '>
                                <p style="margin:4px">
                                <i>stop</i> immediately halts the run on the invalid line.
                                </p>
                        </td>
                </tr>
                <tr>
                <td width="300"  class="about border-ltr ">
                                fail
                        </td>
                <td class='value border-ltr '>
                                <p style="margin:4px">
                                Fail does not stop the run. It only sets the csvpath to be invalid. The invalid setting is visible in the run metadata, by programmatic access, and within the run using CsvPath Language functions.
                                </p>
                        </td>
                </tr>
                <tr>
                <td width="300"  class="about border-ltr ">
                                match
                        </td>
                <td class='value border-ltr '>
                                <p style="margin:4px">
                                <i>match</i> makes all errors result in matches. This doesn't mean all lines will match, but it does mean that no lines will fail to match solely because of built-in validation problems.
                                </p>
                        </td>
                </tr>
                <tr>
                <td width="300"  class="about border-ltr border-bottom">
                                collect
                        </td>
                <td class='value border-ltr border-bottom'>
                                <p style="margin:4px">
                            When <i>collect</i> is set errors are sent to the run's <i>errors.json</i> file. They are also available programmatically. Collecting errors is a default. But in some cases you may not want to, or need to, capture all the errors. This setting allows you to generate less data.
                                </p>
                        </td>
                </tr>
            </table>
        </p>
        <p>
        Note that the global <i>config.ini</i> settings can also take a <i>quiet</i> setting which condenses error messaging going into the logs. <i>quiet</i> is not available in <i>validation-mode</i>.
        </p>
        <h3 >
            Usage
        </h3>
        <table cellspacing="0" cellpadding="2" class='examples' width="900">
            <tr>
                <td width="300"  class="about border-ltr">
                        The possible settings can be combined. This csvpath prints a validation error whenever the random number equals 2 because the variable <i>@a</i> is set to a string that cannot be added to 5. With a data file of any significant size there will be an error and this csvpath's run will be marked as failed.
                </td>
                <td class='value border-ltr '>
<code>
    ~ validation-mode:print, fail, no-raise ~
    $[*][
       @a = 5
       random(1,3) == 2 -> @a = "five"
       add(@a, 5)
    ]
</code>
                </td>
            </tr>
            <tr>
                <td width="300"  class="about border-ltr border-bottom">
            <p>
           When processing very large files, working in development, or for some other reason, you may want to halt processing immediately when there is an error.
           </p>
            <p>
           There are two options: raise and stop. Stop is a graceful halt. Raise gives you more information about the CsvPath Framework's internals.
           </p>
            <p>
           We would expect this csvpath to fail on the first line, assuming the file does not have 1000 headers.
            </p>
                </td>
                <td class='value border-ltr border-bottom code'>
<code>
    ~ validation-mode: raise ~
    $[*][ line( wildcard(1000) ) ]
</code>
                </td>
            </tr>
        </table>
   </body>
</html>
